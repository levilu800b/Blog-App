(this["webpackJsonpblog-app"]=this["webpackJsonpblog-app"]||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),c=a.n(s),i=(a(77),a(14)),o=a(15),l=a(20),d=a(19),u=a(16),b=a(23),j=a(39),h=a(21),p=a(44),O=a(2),x=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(o.a)(a,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),this.props.client.login(e.target.username.value,e.target.password.value).then((function(e){t.setState({disabled:!1}),t.props.loggedIn(e.data.token)})).catch((function(){alert("an error occured, please try again"),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(h.a,{bg:"primary",variant:"dark",fixed:"top",expand:"md",children:[Object(O.jsx)(h.a.Brand,{children:"BlogApp"}),Object(O.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(O.jsx)(p.a,{className:"mr-auto"})})]}),Object(O.jsxs)(j.a,{className:"home",children:[Object(O.jsx)(b.a,{md:3}),Object(O.jsxs)(b.a,{md:6,children:[Object(O.jsx)("br",{}),Object(O.jsx)("h1",{className:"header3",children:"Login"})," ",Object(O.jsx)("br",{}),Object(O.jsxs)("form",{onSubmit:function(t){return e.submitHandler(t)},children:[Object(O.jsx)("h4",{children:"Username"}),Object(O.jsx)(u.a.Control,{type:"text",name:"username",placeholder:"Enter you name",disabled:this.state.disabled}),Object(O.jsx)("br",{}),Object(O.jsx)("h4",{children:"Password"}),Object(O.jsx)(u.a.Control,{type:"password",name:"password",placeholder:"Password",disabled:this.state.disabled}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("button",{class:"btn btn-primary",type:"submit",disabled:this.state.disabled,children:" Submit "})]})]}),Object(O.jsx)(b.a,{md:3})]})]})}}]),a}(r.a.Component),v=(a(54),a(47)),m=a.n(v),f=(a(84),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onClick=function(){m.a.options={closeButton:!0,debug:!1,extendedTimeOut:"1000",hideDuration:"1000",hideEasing:"linear",hideMethod:"fadeOut",newestOnTop:!1,onclick:null,positionClass:"toast-top-full-width",preventDuplicates:!0,progressBar:!0,showDuration:"300",showEasing:"swing",showMethod:"fadeIn",timeOut:"5000"},m.a.clear(),setTimeout((function(){return m.a.success("post added")}))},n.state={disabled:!1},n}return Object(o.a)(a,[{key:"submitHandler",value:function(e){var t,a=this;e.preventDefault(),this.setState({disabled:!0}),this.props.currentAd?(t=this.props.client.updateAd(this.props.currentAd._id,e.target.title.value,e.target.Date.value,e.target.description.value,e.target.markdown.value),console.log(t)):t=this.props.client.addAd(e.target.title.value,e.target.Date.value,e.target.description.value,e.target.markdown.value),console.log(t),t.then((function(){a.setState({disabled:!1}),document.getElementById("addForm").reset(),a.props.refreshList()})).catch((function(){console.log("catch"),alert("an error occured, please try again"),a.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,a,n,r=this;return Object(O.jsxs)(O.Fragment,{children:[this.props.currentAd?Object(O.jsx)("h1",{className:"header",children:" Eidt Article"}):Object(O.jsx)("h1",{className:"header",children:"New Article"}),Object(O.jsxs)(u.a,{className:"Container",onSubmit:function(e){return r.submitHandler(e)},id:"addForm",children:[Object(O.jsxs)(u.a.Group,{children:[Object(O.jsx)(u.a.Label,{children:"Topic title "}),Object(O.jsx)(u.a.Control,{type:"text",defaultValue:null===(e=this.props.currentAd)||void 0===e?void 0:e.title,name:"title",disabled:this.state.disabled}),Object(O.jsx)("br",{})]}),Object(O.jsx)(u.a.Label,{children:" Date "}),Object(O.jsx)(u.a.Control,{type:"date",defaultValue:null===(t=this.props.currentAd)||void 0===t?void 0:t.Date,name:"Date",disabled:this.state.disabled}),Object(O.jsx)("br",{}),"Description",Object(O.jsx)(u.a.Control,{as:"textarea",rows:5,type:"text",defaultValue:null===(a=this.props.currentAd)||void 0===a?void 0:a.description,name:"description",disabled:this.state.disabled}),Object(O.jsx)("br",{}),"Markdown",Object(O.jsx)(u.a.Control,{as:"textarea",rows:3,type:"text",defaultValue:null===(n=this.props.currentAd)||void 0===n?void 0:n.markdown,name:"markdown",disabled:this.state.disabled}),Object(O.jsx)("br",{}),Object(O.jsx)("a",{href:"/",class:"btn btn-secondary",children:"Cancel"})," ",Object(O.jsx)("button",{onClick:this.onClick,type:"submit",disabled:this.state.disabled,class:"btn btn-primary",children:" Save  "}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]})]})}}]),a}(r.a.Component)),g=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={curDate:(new Date).toLocaleDateString()},e}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("p",{children:[" ",this.state.curDate]})})}}]),a}(r.a.Component),k=(a(60),a(128)),y=a(51),w=a(29),A=a(125),C=a(127),D=a(48),N=Object(A.a)((function(e){return{blue:{color:e.palette.getContrastText(D.a[500]),backgroundColor:D.a[500]}}}));function S(){var e=N();return Object(O.jsx)(C.a,{className:e.blue,children:" App "})}var T=a(50),B=a(49),L=a(32),F=a(7),I=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={ads:[],currentAd:void 0},n}return Object(o.a)(a,[{key:"refreshList",value:function(){var e=this;this.props.client.getAds().then((function(t){return e.setState({ads:t.data})}))}},{key:"removeAdvert",value:function(e){this.props.client.removeAd(e).then(this.refreshList())}},{key:"updateAdvert",value:function(e){this.setState({currentAd:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildrows",value:function(){var e=this;return this.state.ads.map((function(t){return Object(O.jsx)("div",{children:Object(O.jsxs)(w.a,{className:"root",children:[Object(O.jsx)(k.a,{avatar:Object(O.jsx)(S,{}),title:t.markdown,subheader:Object(O.jsx)(g,{})}),Object(O.jsx)(y.a,{children:Object(O.jsxs)(w.a,{children:[Object(O.jsxs)(j.a,{children:[Object(O.jsx)(b.a,{md:5}),Object(O.jsxs)(b.a,{md:{span:3,offset:3},children:[Object(O.jsxs)(y.a.Toggle,{as:B.a,variant:"link",eventKey:"0",children:[Object(O.jsx)("button",{className:"btn btn-primary",children:" see more"}),"   ",Object(O.jsx)("button",{className:"btn btn-danger",onClick:function(){return e.removeAdvert(t._id)},children:" Delete"}),"  ",Object(O.jsxs)("button",{className:"btn btn-info",onClick:function(){return e.updateAdvert(t)},children:[" ",Object(O.jsx)(L.b,{className:"color",to:"/add",children:"Edit"})]})]}),"  "]})]}),Object(O.jsx)(y.a.Collapse,{eventKey:"0",children:Object(O.jsxs)(w.a.Body,{children:[Object(O.jsxs)(w.a.Text,{children:[Object(O.jsxs)("b",{children:[t.title,":"]})," "]}),Object(O.jsx)(w.a.Text,{children:t.Date}),Object(O.jsx)(w.a.Text,{}),t.description]})})]})})]})},t._id)}))}},{key:"render",value:function(){var e=this;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(L.a,{children:[Object(O.jsxs)(h.a,{bg:"primary",variant:"dark",fixed:"top",expand:"md",children:[Object(O.jsx)(h.a.Brand,{children:"BlogApp"}),Object(O.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(O.jsxs)(p.a,{className:"mr-auto",children:[Object(O.jsx)(L.b,{className:"nav-link",to:"/view",children:"View"}),Object(O.jsx)(L.b,{className:"nav-link",to:"/add",children:"Add"}),Object(O.jsx)(B.a,{className:"Button",onClick:function(){return e.props.client.logoutHandler()},children:"logout"})]})})]}),Object(O.jsx)(F.a,{path:"/add",children:Object(O.jsxs)(T.a,{children:[Object(O.jsx)("br",{}),Object(O.jsx)("br",{}),Object(O.jsx)(f,{client:this.props.client,refreshList:function(){e.refreshList(),e.setState({currentAd:void 0})},currentAd:this.state.currentAd})]})}),Object(O.jsxs)(F.a,{exact:!0,path:"/view",children:[Object(O.jsxs)(T.a,{children:[Object(O.jsx)("h1",{className:"header",children:"Blog Articles"}),Object(O.jsx)("br",{}),Object(O.jsx)(B.a,{variant:"success",children:Object(O.jsx)(L.b,{className:"btn btn-success",to:"/add",children:"New Article"})})]}),Object(O.jsx)(T.a,{children:this.buildrows()})]})]})})}}]),a}(r.a.Component),E=a(58),H=a.n(E),P=a(70),M=a(59),V=a.n(M),_="https://blog-express-api.herokuapp.com/",J=function(){function e(t,a){Object(i.a)(this,e),this.tokenProvider=t,this.logoutHandler=a}return Object(o.a)(e,[{key:"login",value:function(){var e=Object(P.a)(H.a.mark((function e(t,a){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V()({method:"post",url:"".concat(_,"auth"),data:{username:t,password:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"autheticatedCall",value:function(e,t,a){var n=this;return V()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:a}).catch((function(e){if(403===e.response.status)return n.logoutHandler(),Promise.reject();throw e}))}},{key:"getAds",value:function(){return this.autheticatedCall("get",_)}},{key:"addAd",value:function(e,t,a,n){return this.autheticatedCall("post",_,{title:e,Date:t,description:a,markdown:n})}},{key:"removeAd",value:function(e){return this.autheticatedCall("delete","".concat(_).concat(e))}},{key:"updateAd",value:function(e,t,a,n,r){return this.autheticatedCall("put","".concat(_).concat(e),{title:t,Date:a,description:n,markdown:r})}}]),e}(),K=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={token:window.localStorage.getItem("token")},n.client=new J((function(){return n.state.token}),(function(){return n.logout()})),n}return Object(o.a)(a,[{key:"login",value:function(e){window.localStorage.setItem("token",e),this.setState({token:e})}},{key:"logout",value:function(){window.localStorage.removeItem("token"),this.setState({token:void 0})}},{key:"render",value:function(){var e=this;return this.state.token?Object(O.jsx)(I,{client:this.client}):Object(O.jsx)(x,{loggedIn:function(t){return e.login(t)},client:this.client})}}]),a}(r.a.Component),z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,130)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(K,{})}),document.getElementById("root")),z()},54:function(e,t,a){},77:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.eddca558.chunk.js.map